"use strict";$(function(){$("#regForm").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名必须填写"},stringLength:{min:6,max:12,message:"用户名长度必须在6~12位之间"}}},password:{message:"密码验证失败",validators:{notEmpty:{message:"密码必须填写"},stringLength:{min:6,max:18,message:"密码长度必须在6~18位之间"}}},repeatPassword:{message:"确认密码验证失败",validators:{notEmpty:{message:"确认密码必须填写"},stringLength:{min:6,max:18,message:"确认密码长度必须在6~18位之间"},identical:{field:"password",message:"两次输入的密码不一致"}}},email:{message:"电子邮件验证失败",validators:{notEmpty:{message:"电子邮件必须填写"},emailAddress:{message:"电子邮件格式不正确"}}},mobile:{message:"手机号码验证失败",validators:{notEmpty:{message:"手机号码必须填写"},regexp:{regexp:/^((1[358][0-9])|(14[57])|(17[0678])|(19[7]))\d{8}$/,message:"手机号码格式不正确"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),o=(s.data("bootstrapValidator"),s.serialize());$.post("./api/userAdd.php",o,function(e){if(e.isSuccess){$("#msgShowTitle").text("注册成功"),$(".glyphicon").addClass("glyphicon-ok-sign"),$(".modal-text").text(e.msg+",3秒后自动跳转到登陆页面"),$(".btn-default").text("立即进入");var s=3,o=setInterval(function(){s--,$(".modal-text").text(e.msg+","+s+"秒后自动跳转到登陆页面"),0==s&&(clearInterval(o),location.href="./login.php?menuid=1")},1e3);$("#msgShowModal").on("hidden.bs.modal",function(e){location.href="./login.php?menuid=1",$(".glyphicon").removeClass("glyphicon-ok-sign")})}else $("#msgShowTitle").text("注册失败"),$(".glyphicon").addClass("glyphicon-remove-sign"),$(".modal-text").text(e.msg),$("#msgShowModal").on("hide.bs.modal",function(e){$("#logForm").bootstrapValidator("disableSubmitButtons",!1),$(".glyphicon").removeClass("glyphicon-remove-sign")});$("#msgShowModal").modal("show")},"json")}),$("#logForm").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名必须填写"},stringLength:{min:6,max:12,message:"用户名长度必须在6~12位之间"}}},password:{message:"密码验证失败",validators:{notEmpty:{message:"密码必须填写"},stringLength:{min:6,max:18,message:"密码长度必须在6~18位之间"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),o=(s.data("bootstrapValidator"),s.serialize());$.post("./api/userCheck.php",o,function(e){if(e.isSuccess){$("#msgShowTitle").text("登陆成功"),$(".glyphicon").addClass("glyphicon-ok-sign"),$(".modal-text").text(e.msg+",3秒后自动跳转到个人信息"),$(".btn-default").text("立即进入");var s=3,o=setInterval(function(){s--,$(".modal-text").text(e.msg+","+s+"秒后自动跳转到个人信息"),0==s&&(clearInterval(o),location.href="./personal.php?menuid=4")},1e3);$("#msgShowModal").on("hidden.bs.modal",function(e){location.href="./personal.php?menuid=4",$(".glyphicon").removeClass("glyphicon-ok-sign")})}else $("#msgShowTitle").text("登陆失败"),$(".glyphicon").addClass("glyphicon-remove-sign"),$(".modal-text").text(e.msg),$("#msgShowModal").on("hide.bs.modal",function(e){$("#logForm").bootstrapValidator("disableSubmitButtons",!1),$(".glyphicon").removeClass("glyphicon-remove-sign")});$("#msgShowModal").modal("show")},"json")})});